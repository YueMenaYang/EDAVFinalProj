# Data

## Description

1. Alternative Fuel Price Report in the US
Link: https://afdc.energy.gov/fuels/prices.html 
Last Update/Frequency: Oct 2024
Dimension: 10 columns, 103 rows
Original Format: Excel
Plan to Import in Form: CSV
Description:
This dataset provides the average fuel prices (in dollars per gasoline gallon equivalents, GGEs) in the United States for various fuel types, including Biodiesel (B99-B100), Ethanol (E85), Natural Gas (CNG), Liquefied Natural Gas (LNG), Propane, Gasoline, and Diesel. The data, consisting of numerical values, captures the fluctuations in fuel prices over time, spanning from April 10, 2000, to April 1, 2024.
However, there are several issues with the dataset. Notably, there are numerous missing values, particularly for LNG and B99-B100, especially in the earlier years. Additionally, the frequency of data collection is inconsistent. For instance, in 2000, data was collected only once (on April 10), whereas in 2004, data was collected twice (on March 3 and November 15). This inconsistency could pose challenges when attempting to analyze or compare price trends across years.


2. Charge Station Data in the US 
Link: https://driveelectric.gov/stations
Last Update/Frequency: At least once a year
Dimension: 75 columns, 73967 rows
Original Format: CSV
Plan to Import in Form: CSV
This data is interested that it shows all the geomgraphly distribution along with all EV charging station in the state. In this data set it provide both numerical data and categorical data: For numerical data, it collects and present the charying types counts and location in term of latitude and attitude. For the categorical data, it represents the area, public status, restrict access or so. This dataset does not contain much missing value and majority indicate the distribution information along with area and charge types. Many values in many columns are missing and the dataset is sparse in some part, but as long as the values we need are available, then we will be able to analyze. 


3. Electric Vehicle Population Data in the State of Washington
Link: https://catalog.data.gov/dataset/electric-vehicle-population-data
Last Update/Frequency: October 19, 2024
Dimension: 17 columns, 210165 rows
Original Format: CSV
Plan to Import in Form: CSV
Description:
This dataset shows the Battery Electric Vehicles (BEVs) and Plug-in Hybrid Electric Vehicles (PHEVs) that are registered through the Washington State Department of Licensing (DOL) in 2020. Specifically, this dataset provide variables in term of brand of EV and county location of sales along with their EV types, Model Make, and Ectric Range. There are no missing values in term and the dataset contains both numerical and categorial correspond to parameters in Electric Vehicle and location information. However, there are many 0 values in the column Manufacturer's Suggested Retail Price (MSRP), which are not real values, so we can't use this dataset to discuss the price of EVs. 


4. Electric Vehicle Population Size History By County in the State of Washington
Link: https://catalog.data.gov/dataset/electric-vehicle-population-size-history-by-count
Last Update/Frequency: October 19, 2024
Dimension: 10 columns, 23440 rows
Original Format: Excel
Plan to Import in Form: CSV
Description: 
This shows the number of vehicles that were registered by the Washington State Department of Licensing (DOL) each month from 2020 to 2024. The data is separated by county for passenger vehicles and trucks. Specifically, it provide detail numerical information about Batteries, Plug in, hybrid, total number of EV, and non EV total number. It could be suggested that we could use pie chart or other graph to display the distribution of EV vs Non-EV sales along with Area. There are no missing data, but the data is not organized well. For example, the rows are not sorted based on the dates, so we need to be careful when dealing with it.


## Missing value analysis

```{r}
library(ggplot2)
library(dplyr)
```

1. Alternative Fuel Price Report in the US
```{r}
# Datset name: fuel_prices_average
file_path <- "/Users/mena/Desktop/School/ColumbiaMaster/STAT5702/FinalProj/fuel_prices.csv"
data <- read.csv(file_path, stringsAsFactors = FALSE)

fuel_prices_average <- data[-1, ] # Remove first row (extra header information)
fuel_prices_average <- fuel_prices_average[, -1] 
colnames(fuel_prices_average) <- fuel_prices_average[1, ] # Set proper column names
fuel_prices_average <- fuel_prices_average[-1, ] # Remove row with column names
```

```{r}
missing_values <- colSums(is.na(fuel_prices_average))

# Plot missing values (before handling)
missing_df <- data.frame(Column = names(missing_values), MissingValues = missing_values)
ggplot(missing_df, aes(x = reorder(Column, -MissingValues), y = MissingValues)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  coord_flip() +
  labs(title = "Missing Values Per Column (Before Handling)", x = "Columns", y = "Count of Missing Values")
```
There are no missing values. 

2. Charge Station Data in the US 
```{r}
file_path <- "/Users/mena/Desktop/School/ColumbiaMaster/STAT5702/FinalProj/fuel_Charging_Station.csv"
data <- read.csv(file_path, stringsAsFactors = FALSE)
data[data == ""] <- NA
chargStat <- data
```

```{r, fig.width=10, fig.height=10}

missing_values <- colSums(is.na(chargStat))
missing_df <- data.frame(Column = names(missing_values), MissingValues = missing_values)
rownames(missing_df) <- NULL

ggplot(missing_df, aes(x = reorder(Column, -MissingValues), y = MissingValues)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  coord_flip() +
  labs(
    title = "Missing Values Per Column",
    x = "Columns",
    y = "Count of Missing Values"
  ) +
  theme_minimal()
```
```{r}
missing_df <- missing_df[order(-missing_df$MissingValues), ]
print(missing_df)
```


```{r, fig.width=10, fig.height=5}
chargStat_selected <- chargStat[, c("Fuel.Type.Code", "Station.Name", "City", "State", "ZIP", "Groups.With.Access.Code", "Access.Days.Time", "Date.Last.Confirmed", "Open.Date", "Restricted.Access")]
chargStat_selected <- na.omit(chargStat_selected)

missing_values <- colSums(is.na(chargStat_selected))
missing_df <- data.frame(Column = names(missing_values), MissingValues = missing_values)
rownames(missing_df) <- NULL

ggplot(missing_df, aes(x = reorder(Column, -MissingValues), y = MissingValues)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  coord_flip() +
  labs(
    title = "Missing Values Per Column",
    x = "Columns",
    y = "Count of Missing Values"
  ) +
  theme_minimal()
```

3. Electric Vehicle Population Data in the State of Washington
```{r}
file_path <- "/Users/mena/Desktop/School/ColumbiaMaster/STAT5702/FinalProj/washington_EV_Pop.csv"
data <- read.csv(file_path, stringsAsFactors = FALSE)
data[data == ""] <- NA
wash_EV_pop <- data
```

```{r}
missing_values <- colSums(is.na(wash_EV_pop))
missing_df <- data.frame(Column = names(missing_values), MissingValues = missing_values)
rownames(missing_df) <- NULL

ggplot(missing_df, aes(x = reorder(Column, -MissingValues), y = MissingValues)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  coord_flip() +
  labs(
    title = "Missing Values Per Column",
    x = "Columns",
    y = "Count of Missing Values"
  ) +
  theme_minimal()
```

```{r}
wash_EV_pop_sel <- wash_EV_pop[, !(names(wash_EV_pop) %in% c("Legislative.District", "Vehicle.Location", "Base.MSRP", "X2020.Census.Tract", "DOL.Vehicle.ID"))]
wash_EV_pop_sel <- na.omit(wash_EV_pop_sel)

missing_values <- colSums(is.na(wash_EV_pop_sel))
missing_df <- data.frame(Column = names(missing_values), MissingValues = missing_values)
rownames(missing_df) <- NULL

ggplot(missing_df, aes(x = reorder(Column, -MissingValues), y = MissingValues)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  coord_flip() +
  labs(
    title = "Missing Values Per Column",
    x = "Columns",
    y = "Count of Missing Values"
  ) +
  theme_minimal()
```

4.Electric Vehicle Population Size History By County in the State of Washington
```{r}
file_path <- "/Users/mena/Desktop/School/ColumbiaMaster/STAT5702/FinalProj/wash_EVPop_Hist_County.csv"
data <- read.csv(file_path, stringsAsFactors = FALSE)
data[data == ""] <- NA
wash_EVpop_hist <- data
```

```{r}
missing_values <- colSums(is.na(wash_EVpop_hist))
missing_df <- data.frame(Column = names(missing_values), MissingValues = missing_values)
rownames(missing_df) <- NULL

ggplot(missing_df, aes(x = reorder(Column, -MissingValues), y = MissingValues)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  coord_flip() +
  labs(
    title = "Missing Values Per Column",
    x = "Columns",
    y = "Count of Missing Values"
  ) +
  theme_minimal()
```
```{r}
wash_EVpop_hist <- na.omit(wash_EVpop_hist)

missing_values <- colSums(is.na(wash_EVpop_hist))
missing_df <- data.frame(Column = names(missing_values), MissingValues = missing_values)
rownames(missing_df) <- NULL

ggplot(missing_df, aes(x = reorder(Column, -MissingValues), y = MissingValues)) +
  geom_bar(stat = "identity", fill = "steelblue") +
  coord_flip() +
  labs(
    title = "Missing Values Per Column",
    x = "Columns",
    y = "Count of Missing Values"
  ) +
  theme_minimal()
```

